<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malik Choset Portfolio</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Configure CMU Colors -->
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                cmu: {
                  red: '#C41230',    // Carnegie Red
                  black: '#000000',  // Black
                  iron: '#6D6E71',   // Iron Gray
                  steel: '#E0E0E0',  // Steel Gray
                }
              },
              fontFamily: {
                sans: ['Inter', 'sans-serif'],
              }
            }
          }
        }
    </script>
    
    <!-- React Framework -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        html { scroll-behavior: smooth; }
        
        /* Hide scrollbar for gallery */
        .no-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .no-scrollbar {
          -ms-overflow-style: none;  /* IE and Edge */
          scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-white text-cmu-black">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- ICONS ---
        const Icon = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Wind = ({ className }) => <Icon className={className}><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"/><path d="M9.6 4.6A2 2 0 1 1 11 8H2"/><path d="M12.6 19.4A2 2 0 1 0 14 16H2"/></Icon>;
        const Layers = ({ className }) => <Icon className={className}><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></Icon>;
        const Menu = ({ className }) => <Icon className={className}><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></Icon>;
        const X = ({ className }) => <Icon className={className}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></Icon>;
        const Mail = ({ size }) => <Icon className={`w-${size/4} h-${size/4}`}><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></Icon>;
        const Phone = ({ size }) => <Icon className={`w-${size/4} h-${size/4}`}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></Icon>;
        const Linkedin = ({ size }) => <Icon className={`w-${size/4} h-${size/4}`}><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></Icon>;
        const Download = ({ size }) => <Icon className={`w-${size/4} h-${size/4}`}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></Icon>;
        const CheckCircle = ({ size }) => <Icon className={`w-${size/4} h-${size/4}`}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;

        // --- MAIN APP ---
        const Portfolio = () => {
          const [isMenuOpen, setIsMenuOpen] = useState(false);
          const [selectedProject, setSelectedProject] = useState(null); 
          
          // Form State
          const [formStatus, setFormStatus] = useState("IDLE"); // IDLE, SENDING, SUCCESS, ERROR
          const [formData, setFormData] = useState({
            name: '',
            email: '',
            message: ''
          });

          // ************************************************************
          // IMPORTANT: Replace this string with your Formspree Form ID
          // ************************************************************
          const FORMSPREE_ID = "xpwvlaep"; 

          const scrollToSection = (id) => {
            setIsMenuOpen(false);
            if (id === 'about' || id === 'home') {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return;
            }
            const element = document.getElementById(id);
            if (element) {
              element.scrollIntoView({ behavior: 'smooth' });
            }
          };

          const handleInputChange = (e) => {
            const { name, value } = e.target;
            setFormData(prev => ({ ...prev, [name]: value }));
          };

          const handleSubmit = async (e) => {
            e.preventDefault();
            
            if (FORMSPREE_ID === "PASTE_YOUR_FORMSPREE_ID_HERE") {
                alert("Please add your Formspree ID in the code to enable sending!");
                return;
            }

            setFormStatus("SENDING");

            try {
                const response = await fetch(`https://formspree.io/f/${FORMSPREE_ID}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    setFormStatus("SUCCESS");
                    setFormData({ name: '', email: '', message: '' });
                } else {
                    setFormStatus("ERROR");
                }
            } catch (error) {
                setFormStatus("ERROR");
            }
          };

          // Projects Data
          const projects = [
            {
              id: 1,
              title: "Formula SAE Drag Reduction System (DRS)",
              role: "Sub-System Lead @ Carnegie Mellon Racing",
              category: "Aerodynamics",
              tools: ["SOLIDWORKS", "Luminary CFD", "Ansys Mechanical", "MATLAB"],
              description: "Designed a 4-bar linkage mechanism to control the rear wing airfoil rotation. Validated aerodynamic performance using Luminary CFD and calculated required servo torque via MATLAB. Ensured structural integrity of the enclosure with Ansys FEA.",
              color: "bg-cmu-red/10",
              icon: <Wind className="w-12 h-12 text-cmu-red" />,
              images: [ "drs_1.png", "drs_2.gif", "drs_3.png" ]
            },
            {
              id: 2,
              title: "Robotic Gripper (EigenBot)",
              role: "Research Assistant @ CMU Robotics Institute",
              category: "Robotics",
              tools: ["Ansys Mechanical", "CAD", "Material Selection"],
              description: "Developed a novel force-sensing gripper and foot module utilizing a compressible structure with internal magnets for feedback. Conducted extensive stress simulations to inform design decisions for locomotion and grasping.",
              color: "bg-cmu-steel/20",
              icon: <Layers className="w-12 h-12 text-cmu-black" />,
              images: [ "eig_1.png", "eig_2.png", "eig_3.png" ]
            }
          ];

          const skills = [
            { category: "CAD & Simulation", items: ["SOLIDWORKS", "Ansys Workbench", "Luminary CFD", "Fusion 360", "Ansys Mechanical"] },
            { category: "Programming & Tools", items: ["MATLAB", "Google Workspace", "Slack", "Microsoft Office"] },
            { category: "Core Competencies", items: ["Mechanical Design", "FEA Validation", "CFD Validation", "Prototyping"] },
            { category: "Leadership", items: ["Sub-System Lead (CMR)"] }
          ];

          const ProjectModal = ({ project, onClose }) => {
            const [activeImage, setActiveImage] = useState(project.images[0]);
            if (!project) return null;

            return (
              <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm" onClick={onClose}>
                <div className="bg-white rounded-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto flex flex-col md:flex-row shadow-2xl" onClick={e => e.stopPropagation()}>
                  <div className="md:w-2/3 bg-black flex flex-col">
                    <div className="h-64 md:h-[500px] bg-neutral-900 flex items-center justify-center overflow-hidden">
                        <img src={activeImage} alt="Project Detail" className="w-full h-full object-contain" />
                    </div>
                    <div className="flex gap-2 p-4 overflow-x-auto bg-neutral-900 border-t border-neutral-800 no-scrollbar">
                        {project.images.map((img, idx) => (
                            <button key={idx} onClick={() => setActiveImage(img)} className={`flex-shrink-0 h-16 w-24 rounded overflow-hidden border-2 transition-all ${activeImage === img ? 'border-cmu-red opacity-100' : 'border-transparent opacity-50 hover:opacity-80'}`}>
                                <img src={img} className="w-full h-full object-cover" />
                            </button>
                        ))}
                    </div>
                  </div>
                  <div className="md:w-1/3 p-8 flex flex-col bg-white">
                    <button onClick={onClose} className="self-end p-2 text-cmu-iron hover:text-cmu-red mb-4">
                        <X />
                    </button>
                    <div className="mb-6">
                        <span className="px-2 py-1 bg-cmu-red/10 text-cmu-red text-xs font-bold uppercase tracking-wider rounded">{project.category}</span>
                        <h2 className="text-2xl font-bold text-cmu-black mt-3 mb-1">{project.title}</h2>
                        <p className="text-sm font-semibold text-cmu-iron">{project.role}</p>
                    </div>
                    <div className="prose prose-sm text-cmu-iron leading-relaxed mb-6">{project.description}</div>
                    <div className="mt-auto">
                        <h4 className="text-xs font-bold text-cmu-black uppercase mb-3">Tools Used</h4>
                        <div className="flex flex-wrap gap-2">
                            {project.tools.map((tool, idx) => (
                                <span key={idx} className="text-xs font-mono text-cmu-iron bg-slate-100 px-2 py-1 rounded border border-cmu-steel">{tool}</span>
                            ))}
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          };

          return (
            <div className="min-h-screen bg-white text-cmu-black font-sans selection:bg-cmu-red/30">
              
              {/* Navigation */}
              <nav className="fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-md z-50 border-b border-cmu-steel shadow-sm">
                <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                  <div className="flex justify-between items-center h-16">
                    <div className="flex items-center space-x-2 cursor-pointer" onClick={() => scrollToSection('home')}>
                      <span className="font-bold text-xl tracking-tight text-cmu-black">Malik Choset</span>
                    </div>
                    <div className="hidden md:flex space-x-8 items-center">
                      <button onClick={() => scrollToSection('projects')} className="text-cmu-iron hover:text-cmu-red font-medium transition-colors">Projects</button>
                      <button onClick={() => scrollToSection('contact')} className="text-cmu-iron hover:text-cmu-red font-medium transition-colors">Contact</button>
                      <a href="./Malik_Choset_Resume.pdf" download className="px-4 py-2 bg-cmu-red text-white rounded-md font-medium hover:bg-[#a00f28] transition-colors flex items-center gap-2">
                        <Download size={16} /> Resume
                      </a>
                    </div>
                    <div className="md:hidden">
                      <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="p-2 text-cmu-iron">
                        {isMenuOpen ? <X /> : <Menu />}
                      </button>
                    </div>
                  </div>
                </div>
                {isMenuOpen && (
                  <div className="md:hidden bg-white border-t border-cmu-steel px-4 pt-2 pb-6 shadow-lg">
                    <button onClick={() => scrollToSection('projects')} className="block w-full text-left py-3 text-cmu-iron hover:text-cmu-red font-medium border-b border-cmu-steel">Projects</button>
                    <button onClick={() => scrollToSection('contact')} className="block w-full text-left py-3 text-cmu-iron hover:text-cmu-red font-medium border-b border-cmu-steel">Contact</button>
                    <a href="./Malik_Choset_Resume.pdf" download className="mt-4 w-full py-3 bg-cmu-red text-white rounded-md font-medium flex items-center justify-center gap-2 hover:bg-[#a00f28]">
                      <Download size={16} /> Download Resume
                    </a>
                  </div>
                )}
              </nav>

              {/* Combined Hero & Skills Section */}
              <section id="home" className="pt-32 pb-16 md:pt-40 md:pb-24 px-4 max-w-6xl mx-auto bg-white">
                <div className="flex flex-col md:flex-row gap-12 border-b border-cmu-steel pb-12">
                  
                  {/* Left: About */}
                  <div className="md:w-1/2 space-y-6">
                    <h1 className="text-4xl md:text-5xl font-extrabold text-cmu-black leading-tight">
                      Mechanical Engineering <span className="text-cmu-red">Undergraduate</span>
                    </h1>
                    <p className="text-lg text-cmu-iron leading-relaxed">
                      Hi, I'm Malik, a Mechanical Engineering student at Carnegie Mellon University. 
                    </p>
                    <div className="flex flex-col sm:flex-row gap-4 pt-2">
                      <button onClick={() => scrollToSection('projects')} className="px-6 py-3 bg-cmu-black text-white rounded-lg font-bold hover:bg-cmu-iron transition-transform active:scale-95 shadow-lg shadow-cmu-steel">
                        View Projects
                      </button>
                      <button onClick={() => scrollToSection('contact')} className="px-6 py-3 bg-white text-cmu-iron border border-cmu-steel rounded-lg font-bold hover:bg-gray-50 transition-colors">
                        Contact Me
                      </button>
                    </div>
                  </div>
                  
                  {/* Right: Compact Skills */}
                  <div className="md:w-1/2 bg-slate-50 rounded-xl p-6 border border-cmu-steel">
                    <h3 className="text-sm font-bold text-cmu-iron uppercase tracking-wider mb-4 border-b border-cmu-steel pb-2">Skills</h3>
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-6">
                        {skills.map((skillGroup, idx) => (
                            <div key={idx}>
                                <h4 className="text-sm font-bold text-cmu-black mb-2">{skillGroup.category}</h4>
                                <div className="flex flex-wrap gap-1.5">
                                    {skillGroup.items.map((skill, sIdx) => (
                                        <span key={sIdx} className="px-2 py-0.5 bg-white text-cmu-iron rounded text-[11px] font-medium border border-cmu-steel shadow-sm">
                                            {skill}
                                        </span>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                  </div>

                </div>
              </section>

              {/* Projects Gallery - Now Higher Up */}
              <section id="projects" className="bg-cmu-black py-20 text-white">
                <div className="max-w-6xl mx-auto px-4">
                  <h2 className="text-3xl font-bold mb-4">Engineering Projects</h2>
                  <p className="text-cmu-iron mb-12 text-gray-400">
                    Click on any project to view the detailed image gallery.
                  </p>

                  <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {projects.map((project) => (
                      <div 
                        key={project.id} 
                        onClick={() => setSelectedProject(project)}
                        className="group bg-[#111] rounded-xl overflow-hidden border border-[#333] hover:border-cmu-red transition-all duration-300 flex flex-col cursor-pointer"
                      >
                        <div className={`h-48 w-full ${project.color} flex items-center justify-center relative overflow-hidden`}>
                           {project.images && project.images.length > 0 ? (
                                <img src={project.images[0]} className="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity" />
                           ) : (
                                <div className="transform transition-transform duration-500 group-hover:scale-110">
                                    {project.icon}
                                </div>
                           )}
                           <div className="absolute bottom-3 left-3">
                            <span className="px-2 py-1 bg-cmu-red text-white text-[10px] font-bold uppercase tracking-wider rounded">
                              {project.category}
                            </span>
                           </div>
                        </div>

                        <div className="p-6 flex-1 flex flex-col">
                          <h3 className="text-xl font-bold text-white mb-1 group-hover:text-cmu-red transition-colors">
                            {project.title}
                          </h3>
                          <p className="text-xs font-semibold text-cmu-red mb-3 uppercase tracking-wide">
                            {project.role}
                          </p>
                          <p className="text-gray-400 text-sm mb-4 leading-relaxed flex-1">
                            {project.description.substring(0, 100)}...
                          </p>
                          <div className="flex flex-wrap gap-2 mt-auto">
                            {project.tools.slice(0,3).map((tool, tIdx) => (
                              <span key={tIdx} className="text-[10px] font-mono text-gray-300 bg-[#222] px-2 py-1 rounded border border-[#444]">
                                {tool}
                              </span>
                            ))}
                            {project.tools.length > 3 && <span className="text-[10px] text-gray-500 self-center">+{project.tools.length - 3}</span>}
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </section>

              {/* Contact Section */}
              <section id="contact" className="py-20 max-w-4xl mx-auto px-4">
                <div className="bg-white rounded-2xl shadow-xl border border-cmu-steel overflow-hidden">
                  <div className="grid md:grid-cols-2">
                    <div className="bg-cmu-red p-10 text-white flex flex-col justify-between">
                      <div>
                        <h2 className="text-3xl font-bold mb-4">Get In Touch</h2>
                        <p className="text-red-100 mb-8 text-sm leading-relaxed">
                          Feel free to reach out via phone, email, or LinkedIn.
                        </p>
                      </div>
                      <div className="space-y-4">
                        <a href="mailto:mchoset@andrew.cmu.edu" className="flex items-center gap-3 text-red-100 hover:text-white transition-colors">
                          <Mail size={18} />
                          <span className="text-sm font-medium">mchoset@andrew.cmu.edu</span>
                        </a>
                        <a href="https://linkedin.com/in/malik-choset" className="flex items-center gap-3 text-red-100 hover:text-white transition-colors">
                          <Linkedin size={18} />
                          <span className="text-sm font-medium">/in/malik-choset</span>
                        </a>
                        <a href="tel:4129958642" className="flex items-center gap-3 text-red-100 hover:text-white transition-colors">
                          <Phone size={18} />
                          <span className="text-sm font-medium">(412) 995-8642</span>
                        </a>
                      </div>
                    </div>
                    
                    <div className="p-10 bg-white relative">
                      {formStatus === "SUCCESS" ? (
                        <div className="absolute inset-0 flex flex-col items-center justify-center bg-white p-10 text-center animate-fade-in">
                            <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4">
                                <CheckCircle size={32} className="text-green-600" />
                            </div>
                            <h3 className="text-2xl font-bold text-cmu-black mb-2">Message Sent!</h3>
                            <p className="text-cmu-iron text-sm">Thanks for reaching out. I'll get back to you soon.</p>
                            <button onClick={() => setFormStatus("IDLE")} className="mt-6 text-cmu-red font-bold text-sm hover:underline">Send another message</button>
                        </div>
                      ) : (
                          <form className="space-y-4" onSubmit={handleSubmit}>
                             <p className="text-cmu-iron text-sm mb-4">Send me a direct message:</p>
                            <input type="text" name="name" value={formData.name} onChange={handleInputChange} className="w-full px-4 py-3 bg-gray-50 border border-cmu-steel rounded-lg focus:ring-1 focus:ring-cmu-red outline-none text-sm" placeholder="Your Name" required disabled={formStatus === "SENDING"} />
                            <input type="email" name="email" value={formData.email} onChange={handleInputChange} className="w-full px-4 py-3 bg-gray-50 border border-cmu-steel rounded-lg focus:ring-1 focus:ring-cmu-red outline-none text-sm" placeholder="Your Email" required disabled={formStatus === "SENDING"} />
                            <textarea rows="3" name="message" value={formData.message} onChange={handleInputChange} className="w-full px-4 py-3 bg-gray-50 border border-cmu-steel rounded-lg focus:ring-1 focus:ring-cmu-red outline-none text-sm" placeholder="Hello Malik..." required disabled={formStatus === "SENDING"}></textarea>
                            <button type="submit" disabled={formStatus === "SENDING"} className="w-full py-3 bg-cmu-black text-white font-bold rounded-lg hover:bg-cmu-iron transition-colors text-sm flex justify-center items-center">
                                {formStatus === "SENDING" ? (
                                    <span className="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
                                ) : "Send Message"}
                            </button>
                            {formStatus === "ERROR" && <p className="text-red-600 text-xs text-center mt-2">Something went wrong. Please try again.</p>}
                          </form>
                      )}
                    </div>
                  </div>
                </div>
              </section>

              {/* Footer */}
              <footer className="bg-white border-t border-cmu-steel py-8 text-center">
                <p className="text-cmu-iron text-xs">
                  Â© {new Date().getFullYear()} Malik Choset. All rights reserved. | <a href="./Malik_Choset_Resume.pdf" download className="hover:text-cmu-red">Resume</a>
                </p>
              </footer>

              {selectedProject && <ProjectModal project={selectedProject} onClose={() => setSelectedProject(null)} />}
            
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<Portfolio />);
    </script>
</body>

</html>
